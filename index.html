<!DOCTYPE html>
<html>
<head>
    <title>TTS Accent Comparison</title>
    <style>
        body {
            font-family: Times New Roman, serif;
            margin: 0;
            padding: 0;
        }
        header {
            padding: 20px;
            text-align: left;
        }
        hr {
            margin: 20px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        .highlight {
            background-color: lightgreen;
        }
        .experiment-section {
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <h1>Experiments demo audios</h1>
        <hr>
        <h2>System Comparison</h2>
        <p>YourTTS (CASANOVA <i>et al</i>, 2021): <i>YourTTS brings the power of a multilingual approach to the task of zero-shot multi-speaker TTS. Our method builds upon the VITS model and adds several novel modifications for zero-shot multi-speaker and multilingual training. We achieved state-of-the-art (SOTA) results in zero-shot multi-speaker TTS and results comparable to SOTA in zero-shot voice conversion on the VCTK dataset.</i> <a href="https://arxiv.org/abs/2112.02418">Link</a></p>
        <p>SYNTACC (NGUYEN <i>et al</i>, 2023): <i>The method works by decomposing each weight matrix into a shared component and an accent-dependent component, with the former being initialized by the pretrained multi-speaker TTS model and the latter being factorized into vectors using rank-1 matrices to reduce the number of training parameters per accent. This weight factorization method proves to be effective in fine-tuning the SYNTACC on multi-accent data sets in a low-resource condition.</i> <a href="https://ieeexplore.ieee.org/document/10096431">Link</a></p>
        <hr>
    </header>

    <select id="experimentSelect" onchange="showExperiment()">
        <option value="">Select Experiment</option>
        <option value="experiment1">Experiment 1: Transfer accent</option>
        <option value="experiment2">Experiment 2: General quality</option>
    </select>

    <div id="experiment1" class="experiment-section">
        <h2>Experiment 1: Transfer accent</h2>
        <p>Observações: em brsp é possível observar que em alguns sotaques. Nota-se mudança de prosódia, com alguns sotaques mostrando características interessantes como o 's' do Rio de Janeiro e a entonação da Paraíba, Ceará e Bahia, além do sotaque estrangeiro (Alemanha). Porém, nas falas das planilhas de teste, é difícil de provar esse aprendizado, além de que a diferença entre o yourtts e o syntacc não fica muito evidente de modo geral.</p>
        <p><strong>Bold Text</strong></p>
       
        <div id="audioTable1"></div>
    </div>

    <div id="experiment2" class="experiment-section">
        <h2>Experiment 2: General quality</h2>
        <div id="audioTable2"></div>
    </div>

    <script>
        const accentsExperiment1 = ['bral', 'brpb', 'brsp'];
        const accentTransfers = ['bral', 'brba', 'brce', 'brgo', 'brmg', 'brpb', 'brpe', 'brportugal', 'brpr', 'brrj', 'brrs', 'brsp', 'bralemanha'];
        const accentsExperiment2 = ['bral', 'brba', 'brce', 'brgo', 'brmg', 'brpb', 'brpe', 'brportugal', 'brpr', 'brrj', 'brrs', 'brsp', 'bralemanha'];

        // Highlight rows for each accent in Experiment 1
        const highlightRowsExperiment1 = {
            'bral': [1, 3, 5],
            'brpb': [2, 4, 6],
            'brsp': [0, 7, 8]
        };

        // Highlight rows for each accent in Experiment 2
        const highlightRowsExperiment2 = {
            'bral': [0, 1, 2],
            'brba': [3, 4, 5],
            'brce': [6, 7, 8],
            'brgo': [9, 10, 11],
            'brmg': [12, 13, 14],
            'brpb': [15, 16, 17],
            'brpe': [18, 19, 20],
            'brportugal': [21, 22, 23],
            'brpr': [24, 25, 26],
            'brrj': [27, 28, 29],
            'brrs': [0, 3, 6],
            'brsp': [9, 12, 15],
            'bralemanha': [18, 21, 24]
        };

        function createAudioTable1() {
            const table = document.createElement('table');
            table.innerHTML = `
                <tr>
                    <th>Speaker Sample</th>
                    <th>YourTTS
                         <ul>
                            <li>Text 1
                                <ul>
                                    <li>Dataset: Mupe-v1</li>
                                    <li>Model config</li>
                                </ul>
                            </li>
                            <li>505K steps</li>
                            <li>Text 3</li>
                        </ul>
                    </th>
                    <th>SYNTACC</th>
                </tr>
            `;

            accentsExperiment1.forEach(accent => {
                const groundTruthRow = table.insertRow();
                const gtCell = groundTruthRow.insertCell();
                gtCell.rowSpan = accentTransfers.length+1;
                const groundTruthPath = `experimento1/yourtts/${accent}/ground_truth.wav`;
                console.log(`Ground Truth Path: ${groundTruthPath}`);
                gtCell.innerHTML = `Ground Truth (Accent: ${accent}):<br>
                    <audio controls>
                        <source src="${groundTruthPath}" type="audio/wav">
                    </audio><br><span>${groundTruthPath}</span><br><i>Transcription: ${accent}</i>`;

                accentTransfers.forEach((transfer, index) => {
                    const row = table.insertRow();
                    if (highlightRowsExperiment1[accent].includes(index)) {
                        row.classList.add('highlight');
                    }

                    const yourttsPath = `experimento1/yourtts/${accent}/${accent}to${transfer}-yourtts-505Ksteps.wav`;
                    console.log(`YourTTS Path: ${yourttsPath}`);
                    const yourttsCell = row.insertCell();
                    yourttsCell.innerHTML = `YourTTS ${index + 1}:<br>
                        <audio controls>
                            <source src="${yourttsPath}" type="audio/wav">
                        </audio><br><span>${yourttsPath}</span><br>`;

                    const syntaccPath = `experimento1/syntacc/${accent}/${accent}to${transfer}-syntacc-295Ksteps.wav`;
                    console.log(`SYNTACC Path: ${syntaccPath}`);
                    const syntaccCell = row.insertCell();
                    syntaccCell.innerHTML = `SYNTACC ${index + 1}:<br>
                        <audio controls>
                            <source src="${syntaccPath}" type="audio/wav">
                        </audio><br><span>${syntaccPath}</span><br>`;
                });
            });

            document.getElementById('audioTable1').appendChild(table);
        }

        function createAudioTable2() {
            const table = document.createElement('table');
            table.innerHTML = `
                <tr>
                    <th>Ground Truth</th>
                    <th>YourTTS</th>
                    <th>SYNTACC</th>
                </tr>
            `;

            accentsExperiment2.forEach(accent => {
                for (let i = 0; i < 30; i++) {
                    const row = table.insertRow();
                    if (highlightRowsExperiment2[accent].includes(i)) {
                        row.classList.add('highlight');
                    }

                    const groundTruthPath = `experimento2/${accent}/${accent}-${i}-gt.wav`;
                    const groundTruthCell = row.insertCell();
                    groundTruthCell.innerHTML = `Accent: ${accent}, Sample ${i}<br>
                        <audio controls>
                            <source src="${groundTruthPath}" type="audio/wav">
                        </audio><br><span>${groundTruthPath}</span><br>`;

                    const yourttsPath = `experimento2/${accent}/${accent}-${i}-yourtts-505Ksteps.wav`;
                    const yourttsCell = row.insertCell();
                    yourttsCell.innerHTML = `Accent: ${accent}, Sample ${i}<br>
                        <audio controls>
                            <source src="${yourttsPath}" type="audio/wav">
                        </audio><br><span>${yourttsPath}</span><br>`;

                    const syntaccPath = `experimento2/${accent}/${accent}-${i}-syntacc-295Ksteps.wav`;
                    const syntaccCell = row.insertCell();
                    syntaccCell.innerHTML = `Accent: ${accent}, Sample ${i}<br>
                        <audio controls>
                            <source src="${syntaccPath}" type="audio/wav">
                        </audio><br><span>${syntaccPath}</span><br>`;
                }
            });

            document.getElementById('audioTable2').appendChild(table);
        }

        function showExperiment() {
            const selectedExperiment = document.getElementById('experimentSelect').value;
            document.querySelectorAll('.experiment-section').forEach(section => {
                section.style.display = 'none';
            });
            if (selectedExperiment) {
                document.getElementById(selectedExperiment).style.display = 'block';
            }
            if (selectedExperiment === 'experiment1') {
                if (!document.getElementById('audioTable1').hasChildNodes()) {
                    createAudioTable1();
                }
            } else if (selectedExperiment === 'experiment2') {
                if (!document.getElementById('audioTable2').hasChildNodes()) {
                    createAudioTable2();
                }
            }
        }
    </script>
</body>
</html>
