<!DOCTYPE html>
<html>
<head>
    <title>TTS Accent Comparison</title>
    <style>
        body {
            font-family: Times New Roman, serif;
            margin: 0;
            padding: 0;
        }
        header {
            padding: 20px;
            text-align: left;
        }
        hr {
            margin: 20px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        .transcript {
            text-align: left;
            font-style: italic;
            color: #666;
        }
        .experiment-section {
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <h1>Experiments demo audios</h1>
        <hr>
        <h2>System Comparison</h2>
        <p>YourTTS (CASANOVA <i>et al</i>, 2021): <i>YourTTS brings the power of a multilingual approach to the task of zero-shot multi-speaker TTS. Our method builds upon the VITS model and adds several novel modifications for zero-shot multi-speaker and multilingual training. We achieved state-of-the-art (SOTA) results in zero-shot multi-speaker TTS and results comparable to SOTA in zero-shot voice conversion on the VCTK dataset.</i> <a href="https://arxiv.org/abs/2112.02418">Link</a></p>
        <p>SYNTACC (NGUYEN <i>et al</i>, 2023): <i>The method works by decomposing each weight matrix into a shared component and an accent-dependent component, with the former being initialized by the pretrained multi-speaker TTS model and the latter being factorized into vectors using rank-1 matrices to reduce the number of training parameters per accent. This weight factorization method proves to be effective in fine-tuning the SYNTACC on multi-accent data sets in a low-resource condition.</i> <a href="https://ieeexplore.ieee.org/document/10096431">Link</a></p>
        <hr>
    </header>

    <select id="experimentSelect" onchange="showExperiment()">
        <option value="">Select Experiment</option>
        <option value="experiment1">Experiment 1: Transfer accent</option>
        <option value="experiment2">Experiment 2: General quality</option>
    </select>

    <div id="experiment1" class="experiment-section">
        <h2>Experiment 1: Transfer accent</h2>
        <p>Observações: em brsp1 é possível observar que em alguns sotaques. Nota-se mudança de prosódia, com alguns sotaques mostrando características interessantes como o 's' do Rio de Janeiro e a entonação da Paraíba, Ceará e Bahia, além do sotaque estrangeiro (Alemanha). Porém, nas falas das planilhas de teste, é difícil de provar esse aprendizado, além de que a diferença entre o yourtts e o syntacc não fica muito evidente de modo geral.</p>
        <div id="audioTable1"></div>
    </div>

    <div id="experiment2" class="experiment-section">
        <h2>Experiment 2: General quality</h2>
        <div id="audioTable2"></div>
    </div>

    <script>
        const accentTransfers = [
            'braltobral', 'braltobralemanha', 'braltobrba', 'braltobrce', 'braltobrgo',
            'braltobrmg', 'braltobrpb', 'braltobrpe', 'braltobrportugal', 'braltobrpr',
            'braltobrrj', 'braltobrrs', 'braltobrsp'
        ];

        const accents = ['bral', 'brpb', 'brsp'];

        function createAudioTable1() {
            const table = document.createElement('table');
            table.innerHTML = `
                <tr>
                    <th>Speaker Sample</th>
                    <th>YourTTS</th>
                    <th>SYNTACC</th>
                </tr>
            `;

            accents.forEach(accent => {
                const row = table.insertRow();
                const speakerCell = row.insertCell();
                const groundTruthPath = `experimento1/yourtts/${accent}/ground_truth.wav`;
                speakerCell.innerHTML = `Accent: ${accent}<br>
                    <audio controls>
                        <source src="${groundTruthPath}" type="audio/wav">
                    </audio><br><i>Speaker: "Transcription"</i>`;

                const yourttsCell = row.insertCell();
                accentTransfers.forEach(accentTransfer => {
                    const accentName = accentTransfer.match(/(?<=to)[a-z]+(?=-)/)[0];
                    const filePath = `experimento1/yourtts/${accent}/${accentTransfer}-yourtts-505Ksteps.wav`;
                    yourttsCell.innerHTML += `Accent: ${accentName}<br>
                        <audio controls>
                            <source src="${filePath}" type="audio/wav">
                        </audio><br><span>${filePath}</span><br>`;
                });

                const syntaccCell = row.insertCell();
                accentTransfers.forEach(accentTransfer => {
                    const accentName = accentTransfer.match(/(?<=to)[a-z]+(?=-)/)[0];
                    const filePath = `experimento1/syntacc/${accent}/${accentTransfer}-syntacc-295Ksteps.wav`;
                    syntaccCell.innerHTML += `Accent: ${accentName}<br>
                        <audio controls>
                            <source src="${filePath}" type="audio/wav">
                        </audio><br><span>${filePath}</span><br>`;
                });
            });

            document.getElementById('audioTable1').appendChild(table);
        }

        function createAudioTable2() {
            const table = document.createElement('table');
            table.innerHTML = `
                <tr>
                    <th>Ground Truth</th>
                    <th>YourTTS</th>
                    <th>SYNTACC</th>
                </tr>
            `;

            const accents = [
                'bral', 'bralem', 'brba', 'brce', 'brgo', 'brmg', 'brpb', 
                'brpe', 'brportugal', 'brpr', 'brrj', 'brrs', 'brsp'
            ];

            accents.forEach(accent => {
                for (let i = 0; i < 30; i++) {
                    const row = table.insertRow();
                    
                    const groundTruthPath = `experimento2/${accent}/${accent}-${i}-gt.wav`;
                    const groundTruthCell = row.insertCell();
                    groundTruthCell.innerHTML = `Accent: ${accent}, Sample ${i}<br>
                        <audio controls>
                            <source src="${groundTruthPath}" type="audio/wav">
                        </audio><br><span>${groundTruthPath}</span><br>`;

                    const yourttsPath = `experimento2/${accent}/${accent}-${i}-yourtts-505Ksteps.wav`;
                    const yourttsCell = row.insertCell();
                    yourttsCell.innerHTML = `Accent: ${accent}, Sample ${i}<br>
                        <audio controls>
                            <source src="${yourttsPath}" type="audio/wav">
                        </audio><br><span>${yourttsPath}</span><br>`;

                    const syntaccPath = `experimento2/${accent}/${accent}-${i}-syntacc-295Ksteps.wav`;
                    const syntaccCell = row.insertCell();
                    syntaccCell.innerHTML = `Accent: ${accent}, Sample ${i}<br>
                        <audio controls>
                            <source src="${syntaccPath}" type="audio/wav">
                        </audio><br><span>${syntaccPath}</span><br>`;
                }
            });

            document.getElementById('audioTable2').appendChild(table);
        }

        function showExperiment() {
            const selectedExperiment = document.getElementById('experimentSelect').value;
            document.querySelectorAll('.experiment-section').forEach(section => {
                section.style.display = 'none';
            });
            if (selectedExperiment) {
                document.getElementById(selectedExperiment).style.display = 'block';
            }
            if (selectedExperiment === 'experiment1') {
                createAudioTable1();
            } else if (selectedExperiment === 'experiment2') {
                createAudioTable2();
            }
        }
    </script>
</body>
</html>
